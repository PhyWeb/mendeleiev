<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le génie de Mendeleïev - page 2</title>
    <link rel="stylesheet" href="style.css">
    <script src="data.js"></script>
    <script src="game.js"></script>
</head>
<body>

    <header>
        <h2>Le génie de Mendeleïev - Les trous du tableau</h2>
        <p>
            Ci-dessous figure un tableau inspiré de celui de Mendeleiev plus complet que celui que vous avez construit.
            Ainsi, entre le zinc (Zn) et l'arsenic (As), Mendeleiev a laissé <span class="highlight-vacantes">deux places vacantes</span> alors que dans l'ordre des masses atomiques As vient juste après Zn.
        </p>
    </header>

    <div class="main-container">
        
        <section class="game-area">
            
            <div class="question-box">
                <p class="question-title">
                    Pourquoi Mendeleiev n'a-t-il pas placé As en dessous de Al ou de Si ? <span class="consigne">(observez les propriétés...)</span>
                </p>
                
                <div class="quiz-options">
                    <label class="radio-option">
                        <input type="radio" name="reponse" value="a">
                        <span>aucune raison particulière, juste par amusement</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="reponse" value="b">
                        <span>parce que l'arsenic est très toxique et qu'il était ainsi mis en évidence</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="reponse" value="c">
                        <span>parce que As n'a aucun point commun avec Al ou Si alors qu'il "ressemble" à P</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="reponse" value="d">
                        <span>parce que l'arsenic est beaucoup trop lourd</span>
                    </label>
                </div>
            </div>

            <div class="mendeleev-grid" id="grid-container"></div>

        </section>

        <aside class="info-panel">
            <div class="info-header">
                <div id="info-symbole">--</div>
                <div id="info-nom">Survolez un élément</div>
            </div>
            <div class="info-item"><span class="info-label">Masse atomique (H=1)</span><span id="info-masse" class="info-value"></span></div>
            <div class="info-item"><span class="info-label">Formule corps simple</span><span id="info-formule" class="info-value"></span></div>
            <div class="info-item"><span class="info-label">Propriétés Physiques</span><span id="info-propPhy" class="info-value"></span></div>
            <div class="info-item"><span class="info-label">Propriétés Chimiques</span><span id="info-propChi" class="info-value"></span></div>
            <div class="info-item"><span class="info-label">Composés</span><span id="info-composes" class="info-value"></span></div>
        </aside>

    </div>

    <footer class="controls">
        <button class="btn" id="btn-verif" onclick="verifierReponse()">Valider</button>
        <div id="message-box"></div>
        <div class="nav-links">
            <a href="partie3_01.html" class="link-simple">&larr; Retour</a>
            <a href="partie3_03.html" id="btn-suite" class="btn" style="display:none;">Suite &rarr;</a>
        </div>
    </footer>

    <script>
        // --- 1. DONNÉES EXACTES DU FICHIER ORIGINAL ---
        const newElements = [
            {
                id: "Ti", nom: "TITANE", masse: "47,9", formule: "Ti",
                propPhy: "* Métal dur, brillant<br/>* Masse volumique faible",
                propChi: "* Métal peu corrodable<br/>",
                composes: "TiO<sub>2</sub>&nbsp;&nbsp;&nbsp;&nbsp;TiH<sub>2</sub>&nbsp;&nbsp;&nbsp;&nbsp;TiCl<sub>3</sub>"
            },
            {
                id: "Cu", nom: "CUIVRE", masse: "63,5", formule: "Cu",
                propPhy: "* Métal de couleur caractéristique (rouge)<br/>* Malléable, ductile<br/>* Point de fusion peu élevé",
                propChi: "* Nombreux composés d'intérêt ",
                composes: "CuO&nbsp;&nbsp;&nbsp;&nbsp;CuS&nbsp;&nbsp;&nbsp;&nbsp;CuSO<sub>4</sub>"
            },
            {
                id: "Zn", nom: "ZINC", masse: "65,4", formule: "Zn",
                propPhy: "* Métal gris<br/>* Nombreux alliages intéressants",
                propChi: "* Nombreux composés d'intérêt ",
                composes: "ZnO&nbsp;&nbsp;&nbsp;&nbsp;ZnS&nbsp;&nbsp;&nbsp;&nbsp;ZnCO<sub>3</sub>"
            },
            {
                id: "Se", nom: "SELENIUM", masse: "79,0", formule: "Se",
                propPhy: "* Photoconducteur (rendu conducteur sous un éclairage)",
                propChi: "* Dérivés très toxiques",
                composes: "H<sub>2</sub>Se&nbsp;&nbsp;&nbsp;&nbsp;SeO<sub>2</sub>"
            }
        ];

        // Injection dans elementsData
        if (typeof elementsData !== 'undefined') {
            newElements.forEach(newItem => {
                const idx = elementsData.findIndex(e => e.id === newItem.id);
                if(idx !== -1) elementsData[idx] = newItem; 
                else elementsData.push(newItem);
            });
        }

        const grid = document.getElementById('grid-container');

        // Fonction d'affichage utilisant game.js
        function appendCard(container, id) {
            if (typeof elementsData !== 'undefined' && typeof createCard === 'function') {
                const data = elementsData.find(e => e.id === id);
                if (data) {
                    const card = createCard(data, false); // false = non draggable
                    card.style.cursor = "help"; 
                    container.appendChild(card);
                    return;
                }
            }
            // Fallback
            const div = document.createElement('div');
            div.className = 'element-card';
            div.innerText = id;
            container.appendChild(div);
        }

        // --- 2. CONSTRUCTION DE LA GRILLE (LOGIQUE EXACTE ORIGINALE) ---
        
        // LIGNE 1
        appendCard(grid, "H");
        for(let i=0; i<7; i++) grid.appendChild(document.createElement('div'));

        // LIGNE 2
        appendCard(grid, "Li"); appendCard(grid, "Be");
        grid.appendChild(document.createElement('div')); 
        ["B", "C", "N", "O", "F"].forEach(id => appendCard(grid, id));

        // LIGNE 3
        appendCard(grid, "Na"); appendCard(grid, "Mg");
        grid.appendChild(document.createElement('div'));
        ["Al", "Si", "P", "S", "Cl"].forEach(id => appendCard(grid, id));

        // LIGNE 4 (C'est ici que Ti, Cu, Zn sont placés)
        appendCard(grid, "K"); appendCard(grid, "Ca");

        // Bloc Transition
        const transDiv = document.createElement('div');
        transDiv.className = 'transition-container';
        
        appendCard(transDiv, "Ti"); // Ti d'abord
        
        const txt = document.createElement('div');
        txt.className = 'transition-text';
        txt.innerHTML = "...<br>6 éléments connus non représentés<br>..."; 
        transDiv.appendChild(txt);
        
        appendCard(transDiv, "Cu"); // Puis Cu
        appendCard(transDiv, "Zn"); // Puis Zn
        
        grid.appendChild(transDiv);

        // Le Trou
        const hole = document.createElement('div');
        hole.className = 'hole-box';
        hole.innerHTML = "Deux places vacantes";
        grid.appendChild(hole);

        appendCard(grid, "As"); appendCard(grid, "Se"); appendCard(grid, "Br");


        // --- 3. VERIFICATION (TEXTES ORIGINAUX) ---
        function verifierReponse() {
            const radios = document.getElementsByName('reponse');
            let val = null;
            for(let r of radios) if(r.checked) val = r.value;

            const msgBox = document.getElementById('message-box');
            const btnSuite = document.getElementById('btn-suite');

            if(!val) {
                msgBox.innerHTML = "Veuillez sélectionner une réponse.";
                msgBox.className = "";
                return;
            }

            if (val === 'c') {
                msgBox.innerHTML = "Oui ! En appliquant strictement la règle des \"ressemblances chimiques et physiques\", As ne peut être situé qu'en dessous de P";
                msgBox.className = "msg-success";
                document.getElementById('btn-verif').disabled = true;
                btnSuite.style.display = "inline-block";
            } else {
                msgBox.className = "msg-error";
                if (val === 'a') msgBox.innerHTML = "Essayez de répondre sérieusement ! Mendeleiev avait une réflexion très pointue, contrairement à vous !";
                else if (val === 'b') msgBox.innerHTML = "Cela pourrait être un argument mais le raisonnement de Mendeleiev reposait sur des faits plus rigoureux.";
                else if (val === 'd') msgBox.innerHTML = "Effectivement, si on compare l'arsenic au zinc, il y a un \"bond\" au niveau de la masse atomique. Mais il y a plus rigoureux...";
            }
        }
    </script>
</body>
</html>