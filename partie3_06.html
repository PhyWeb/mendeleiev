<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le génie de Mendeleïev - page 6</title>
    <link rel="stylesheet" href="style.css">
    <script src="data.js"></script>
    <script src="game.js"></script>
</head>
<body>

    <header>
        <h2>Le génie de Mendeleïev - La colonne manquante</h2>
    </header>

    <div class="main-container">
        
        <section class="game-area">
            
            <div class="question-box">
                <p>Pour terminer, il reste à constater que dans le tableau de Mendeleiev, <strong style="color: #FF0066;">la dernière colonne</strong> (celle des éléments aujourd'hui dénommés "gaz rares") <strong style="color: #FF0066;">était manquante.</strong></p>
                <p class="consigne" style="font-weight: bold; color: var(--primary-color);">Pour quelle raison en était-il ainsi ?</p>
                
                <div class="quiz-options">
                    <label>
                        <input type="radio" name="q1" value="a">
                        Ces gaz étant rares, ils n'avaient pu être découverts
                    </label>
                    <label>
                        <input type="radio" name="q1" value="b">
                        Mendeleiev ne les a pas placés dans son tableau car il ne leur trouvait aucun intérêt
                    </label>
                    <label>
                        <input type="radio" name="q1" value="c">
                        Son tableau ne pouvait pas dépasser une certaine largeur
                    </label>
                    <label>
                        <input type="radio" name="q1" value="d">
                        Les gaz rares étant chimiquement inertes (leurs atomes satisfaisant les règles du duet et de l'octet, ils sont stables), ils n'ont pas de propriétés chimiques et ne pouvaient donc pas être découverts comme les autres éléments l'avaient été
                    </label>
                    <label>
                        <input type="radio" name="q1" value="e">
                        Les gaz rares n'existaient pas encore à l'époque de Mendeleiev
                    </label>
                </div>
            </div>

            <div class="grid-missing-col" id="grid-container"></div>

        </section>

    </div>

    <footer class="controls">
        <button class="btn" id="btn-verif" onclick="verifierReponse()">Valider</button>
        <div id="message-box"></div>
        <div class="nav-links">
            <a href="partie3_05.html" class="link-simple">&larr; Retour</a>
            <a href="partie3_07.html" id="btn-suite" class="btn" style="display:none;">Suite</a>
        </div>
    </footer>

    <script>
        // --- 1. FONCTIONS UTILITAIRES LOCALES ---
        
        // Ajoute une case "?"
        function addMissingCard(container) {
            const div = document.createElement('div');
            div.className = 'element-card missing';
            div.textContent = "?";
            div.title = "Famille inconnue à l'époque";
            container.appendChild(div);
        }

        // Ajoute N cases vides (pour l'espacement)
        function addGap(container, count = 1) {
            for(let i=0; i<count; i++) {
                const div = document.createElement('div');
                container.appendChild(div);
            }
        }

        // Récupère les données et crée une carte via game.js
        function addElement(container, id) {
            const data = elementsData.find(e => e.id === id);
            if(data) {
                // createCard(data, isDraggable=false)
                container.appendChild(createCard(data, false));
            }
        }

        // --- 2. CONSTRUCTION DE LA GRILLE ---
        const grid = document.getElementById('grid-container');

        // Ligne 1 : H ...... ?
        addElement(grid, "H");
        addGap(grid, 6); // 6 espaces vides pour aligner H avec Li et F
        addMissingCard(grid);

        // Ligne 2 : Li -> F ... ?
        ["Li", "Be", "B", "C", "N", "O", "F"].forEach(id => addElement(grid, id));
        addMissingCard(grid);

        // Ligne 3 : Na -> Cl ... ?
        ["Na", "Mg", "Al", "Si", "P", "S", "Cl"].forEach(id => addElement(grid, id));
        addMissingCard(grid);


        // --- 3. VÉRIFICATION (Textes originaux restaurés) ---
        function verifierReponse() {
            const radios = document.getElementsByName('q1');
            let val = null;
            for(let r of radios) if(r.checked) val = r.value;

            const msgBox = document.getElementById('message-box');
            const btnSuite = document.getElementById('btn-suite');

            if (!val) {
                msgBox.innerHTML = "Veuillez sélectionner une réponse.";
                msgBox.className = "";
                return;
            }

            if (val === 'd') {
                msgBox.innerHTML = "En effet ! Les gaz rares ne réagissent avec aucun autre élément chimique.<br/>Ils passaient donc inaperçus lors de la mise en évidence de nouveaux éléments par des réactions chimiques.";
                msgBox.className = "msg-success";
                
                document.getElementById('btn-verif').disabled = true;
                btnSuite.style.display = "inline-block";
                
                // Désactivation des radios
                radios.forEach(r => r.disabled = true);
            } else {
                msgBox.className = "msg-error";
                if (val === 'a') {
                    msgBox.innerHTML = "Non ! Le nom de gaz rare ne signifie pas qu'ils le sont (on les appelle d'ailleurs d'une autre façon: les \"gaz nobles\").<br/> L'un de ces gaz, l'argon, représente environ 1% de l'atmosphère que nous respirons, ce qui n'est pas négligeable !";
                }
                else if (val === 'b') {
                    msgBox.innerHTML = "Non ! Dans la rigueur qu'il apportait à son travail, Mendeleiev n'avait aucune raison d'ignorer des éléments connus.";
                }
                else if (val === 'c') {
                    msgBox.innerHTML = "Ce n'est pas un argument très rigoureux, sachant que Mendeleiev partait \"de rien\" !";
                }
                else if (val === 'e') {
                    msgBox.innerHTML = "Tous les éléments chimiques présents sur Terre l'étaient déjà à sa création il y a plus de 4 milliards d'années. Mendeleiev n'était même pas né !";
                }
            }
        }
    </script>
</body>
</html>