<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le génie de Mendeleïev - page 4</title>
    <link rel="stylesheet" href="style.css">
    <script src="data.js"></script>
    <script src="game.js"></script>
    <style>
        .game-area {
            width: 100%;
            max-width: 860px;
        }
    </style>
</head>
<body>

    <header>
        <h2>Le génie de Mendeleïev - Les numéros atomiques</h2>
    </header>

    <div class="main-container">
        
        <section class="game-area">
            
            <div class="question-box intro-text">
                <p style="font-size: 1.1em; font-weight: bold; color: var(--text-color);">
                    Vous pouvez désormais ajouter dans ce tableau les <span style="color: #FF0066;">numéros atomiques</span> du gallium et du germanium avant de valider (pour rappel, ces numéros étaient inconnus de Mendeleiev).
                </p>
            </div>

            <div class="mendeleev-grid" id="grid-container">
                </div>

        </section>

    </div>

    <footer class="controls">
        <button class="btn" id="btn-verif" onclick="verifierReponse()">Valider</button>
        <div id="message-box"></div>
        <div class="nav-links">
            <a href="partie3_03.html" class="link-simple">&larr; Retour</a>
            <a href="partie3_05.html" id="btn-suite" class="btn" style="display:none;">Suite</a>
        </div>
    </footer>

    <script>
        const grid = document.getElementById('grid-container');

        // On appelle la grille avec le nouveau mode 'atomic_input'
        renderMendeleevGrid(grid, { mode: 'atomic_input' });

        // --- 4. VERIFICATION ---
        function verifierReponse() {
            const rep1 = document.getElementById('rep1').value.trim();
            const rep2 = document.getElementById('rep2').value.trim();
            const msgBox = document.getElementById('message-box');
            
            const bonrep = ["31", "32"];
            const rep = [rep1, rep2];
            let testrep = 0;

            for(let i=0; i<2; i++) {
                if(rep[i] === bonrep[i]) testrep++;
            }

            const err = 2 - testrep;

            if (testrep === 2) {
                msgBox.innerHTML = "Parfait ! Vous avez bien assimilé que les numéros atomiques se suivent le long des lignes... <br/>Vous pouvez passer à la suite.";
                msgBox.className = "msg-success";
                
                document.getElementById('btn-verif').disabled = true;
                document.getElementById('rep1').disabled = true;
                document.getElementById('rep2').disabled = true;
                
                document.getElementById('btn-suite').style.display = "inline-block";
            } else {
                msgBox.innerHTML = "Non ! Vous avez commis " + err + " erreur(s) (ou vous avez oublié de répondre...)<br/>Rappelez-vous le critère actuel de classement des éléments le long des lignes...";
                msgBox.className = "msg-error";
            }
        }
    </script>
</body>
</html>